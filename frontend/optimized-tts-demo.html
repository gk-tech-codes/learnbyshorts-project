<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimized Natural TTS Butterfly Reader</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/butterfly-reader.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        .demo-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .demo-title {
            text-align: center;
            color: #2d3748;
            margin-bottom: 2rem;
        }
        .demo-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #4a5568;
        }
        .demo-instructions {
            background: #f7fafc;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #48bb78;
        }
        .voice-selector {
            margin: 1rem 0;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">ðŸ¦‹ Optimized Natural Voice Butterfly Reader</h1>
        
        <div class="demo-instructions">
            <h3>ðŸŽµ Optimized Browser TTS Features:</h3>
            <ul>
                <li>ðŸ†“ <strong>No external dependencies</strong> - Works offline!</li>
                <li>ðŸŽ­ <strong>Best available system voices</strong> - Auto-selects natural voices</li>
                <li>ðŸ”§ <strong>Optimized settings</strong> - Perfect rate, pitch, and volume</li>
                <li>âš¡ <strong>Instant loading</strong> - No CDN dependencies</li>
                <li>ðŸ¦‹ <strong>Smooth butterfly animation</strong> - Synced with speech</li>
            </ul>
            
            <label for="voiceSelect">Choose Voice:</label>
            <select id="voiceSelect" class="voice-selector">
                <option value="">Loading voices...</option>
            </select>
            
            <button id="testAudio" style="background: #48bb78; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                ðŸ”Š Test Selected Voice
            </button>
        </div>

        <div class="demo-content" id="storyContent">
            <p>Arjun stared at his computer screen in frustration. For the third time that morning, he had typed "Write marketing copy" into ChatGPT, and for the third time, he got generic content that could apply to any company selling anything.</p>

            <p>"This is supposed to be revolutionary AI," he muttered, deleting another bland paragraph about "innovative solutions" and "customer satisfaction." His deadline was approaching fast, and his boss Rajesh was expecting compelling copy for their new project management software.</p>

            <p>Just then, his colleague Priya walked by his desk. She noticed his frustrated expression and the ChatGPT tab open on his screen. "Having trouble with AI prompts?" she asked with a knowing smile.</p>

            <p>"It's like talking to a robot that doesn't understand context," Arjun complained. "I ask for marketing copy, and it gives me something so generic it could be selling toothpaste or rocket ships."</p>

            <p>Priya pulled up a chair. "That's because you're not speaking its language yet. AI is incredibly powerful, but it needs the right instructions. Let me show you something that changed everything for me."</p>

            <p>She opened a new ChatGPT window and began typing: "You are a senior marketing copywriter for a B2B SaaS company. Write compelling marketing copy for a project management software called 'TaskFlow Pro' that helps remote teams collaborate better."</p>

            <p>Arjun watched in amazement as ChatGPT generated exactly what he needed - specific, targeted copy that spoke directly to their audience's problems and positioned TaskFlow Pro as the solution.</p>

            <p>"How did you do that?" Arjun asked, his eyes wide with realization.</p>

            <p>"Welcome to the world of prompt engineering," Priya said with a grin. "It's not magic - it's a skill. And I'm going to teach you the CLEAR framework that will transform how you work with AI forever."</p>
        </div>
    </div>

    <script src="js/butterfly-reader-optimized.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const voiceSelect = document.getElementById('voiceSelect');
            const testAudioBtn = document.getElementById('testAudio');
            let butterflyReader;
            
            // Load available voices
            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                voiceSelect.innerHTML = '';
                
                // Filter and sort voices for best quality
                const englishVoices = voices.filter(voice => voice.lang.startsWith('en'));
                const sortedVoices = englishVoices.sort((a, b) => {
                    // Prioritize Google, Microsoft, then local voices
                    if (a.name.includes('Google') && !b.name.includes('Google')) return -1;
                    if (b.name.includes('Google') && !a.name.includes('Google')) return 1;
                    if (a.name.includes('Microsoft') && !b.name.includes('Microsoft')) return -1;
                    if (b.name.includes('Microsoft') && !a.name.includes('Microsoft')) return 1;
                    if (a.localService && !b.localService) return -1;
                    if (b.localService && !a.localService) return 1;
                    return 0;
                });
                
                sortedVoices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    if (index === 0) option.selected = true; // Select best voice by default
                    voiceSelect.appendChild(option);
                });
                
                // Initialize butterfly reader with best voice
                if (sortedVoices.length > 0) {
                    initButterflyReader(sortedVoices[0]);
                }
            }
            
            // Test audio button
            testAudioBtn.addEventListener('click', function() {
                const voices = speechSynthesis.getVoices();
                const selectedVoice = voices[voiceSelect.value];
                
                if (selectedVoice) {
                    const utterance = new SpeechSynthesisUtterance("Hello! This voice sounds great for reading.");
                    utterance.voice = selectedVoice;
                    utterance.rate = 0.85;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    utterance.onstart = () => {
                        testAudioBtn.innerHTML = 'ðŸ”Š Speaking...';
                        testAudioBtn.disabled = true;
                    };
                    
                    utterance.onend = () => {
                        testAudioBtn.innerHTML = 'âœ… Voice Works!';
                        setTimeout(() => {
                            testAudioBtn.innerHTML = 'ðŸ”Š Test Selected Voice';
                            testAudioBtn.disabled = false;
                        }, 2000);
                    };
                    
                    speechSynthesis.speak(utterance);
                }
            });
            
            // Voice selection change
            voiceSelect.addEventListener('change', function() {
                const voices = speechSynthesis.getVoices();
                const selectedVoice = voices[this.value];
                if (selectedVoice && butterflyReader) {
                    butterflyReader.setVoice(selectedVoice);
                }
            });
            
            function initButterflyReader(voice) {
                const storyContent = document.getElementById('storyContent');
                butterflyReader = new ButterflyReader(storyContent, {
                    speed: 180,
                    autoStart: false,
                    showControls: true,
                    showProgress: true,
                    enableVoice: true,
                    selectedVoice: voice
                });
            }
            
            // Load voices when available
            if (speechSynthesis.getVoices().length > 0) {
                loadVoices();
            } else {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        });
    </script>
</body>
</html>
